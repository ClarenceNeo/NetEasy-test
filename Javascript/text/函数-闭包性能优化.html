<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>闭包使用举例-性能优化</title>
  </head>
  <body>
    <script type="text/javascript">
      // 减少函数定义时间和内存消耗

      // 不使用闭包
      function sum(i, j) {
        var add = function(i, j) {
          return i + j;
        }
        return add(i, j)
      }
      var startTime = new Date();
      for (var i = 0; i < 1000000; i++) {
        sum(1,1);
      }
      var endTime = new Date();
      console.log(endTime - startTime);

      // 使用闭包
      var sum = (function() {
        var add = function(i, j) {
          return i + j;
        }
        return function(i, j) {
          add(i, j);
        }
      })();
      var startTime = new Date();
      for (var i = 0; i < 1000000; i++) {
        sum(1,1);
      }
      var endTime = new Date();
      console.log(endTime - startTime);

    </script>
  </body>
</html>